<!DOCTYPE html>
<html>
<head>
<title>Luck Simulator</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #0f0; padding: 20px; }
  button { background: #0f0; color: #111; padding: 10px; margin: 10px 0; font-size: 16px; }
</style>
</head>
<body>

<h1>Luck Simulator</h1>
<div id="stats"></div>
<div id="log"></div>
<button onclick="roll()">Roll</button>

<script>
let luck = 1.0, lp = 0, pp = 0, tp = 0;
let lpBoost = 1.0, ppBoost = 1.0, tpBoost = 1.0;
let roundNum = 0;

function rollRarity() {
    let rarity = Math.max(1, Math.floor(Math.random() * luck) + 1);
    let skip = Math.random() < 0.01;
    if (skip) rarity++;
    return {rarity, skip};
}

function applyLP() {
    lp++;
    luck += 0.5 * lp;
}

function applyPP() {
    pp++;
    lp = 0;
    lpBoost += 0.5;
    ppBoost += 2.0;
    luck *= ppBoost;
}

function applyTP(skip) {
    tp++;
    tpBoost += 1.0;
    lpBoost += 0.5;
    ppBoost += 0.25;
    if (skip) tpBoost += 0.125;
    luck = Math.pow(luck, tpBoost);
}

function roll() {
    roundNum++;
    let {rarity, skip} = rollRarity();

    if (rarity === 1) applyLP();
    if (rarity === 5) applyPP();
    if (rarity === 25) applyTP(skip);

    document.getElementById("log").innerHTML = 
        `Round ${roundNum}: Rolled rarity ${rarity}` + (skip ? " (Lucky Skip!)" : "") + "<br>" +
        document.getElementById("log").innerHTML;

    updateStats();
}

function updateStats() {
    document.getElementById("stats").innerHTML = `
        Luck: ${luck.toFixed(2)}<br>
        LP: ${lp} | PP: ${pp} | TP: ${tp}<br>
        LP Boost: ${lpBoost.toFixed(2)} | PP Boost: ${ppBoost.toFixed(2)} | TP Boost: ${tpBoost.toFixed(3)}
    `;
}

updateStats();
</script>

</body>
</html>
