<import> { useState } from "react"

interface Rarity {
  name: string
  chance: number
  color: string
  lpReward: number
  ppReward: number
  tpReward: number
}

const rarities: Rarity[] = [
  { name: "Common", chance: 50, color: "text-gray-600", lpReward: 1, ppReward: 0, tpReward: 0 },
  { name: "Uncommon", chance: 25, color: "text-green-600", lpReward: 5, ppReward: 0, tpReward: 0 },
  { name: "Rare", chance: 15, color: "text-blue-600", lpReward: 25, ppReward: 1, tpReward: 0 },
  { name: "Epic", chance: 7, color: "text-purple-600", lpReward: 125, ppReward: 5, tpReward: 0 },
  { name: "Legendary", chance: 2.5, color: "text-orange-600", lpReward: 625, ppReward: 25, tpReward: 1 },
  { name: "Mythic", chance: 0.5, color: "text-red-600", lpReward: 3125, ppReward: 125, tpReward: 5 },
]

export default function Home() {
  const [currentRarity, setCurrentRarity] = useState<Rarity>(rarities[0])
  const [luckPoints, setLuckPoints] = useState(0)
  const [prestigePoints, setPrestigePoints] = useState(0)
  const [transcendentPoints, setTranscendentPoints] = useState(0)
  const [luckMultiplier, setLuckMultiplier] = useState(1)
  const [lpMultiplier, setLpMultiplier] = useState(1)
  const [ppMultiplier, setPpMultiplier] = useState(1)
  const [totalRolls, setTotalRolls] = useState(0)
  const [lastSkip, setLastSkip] = useState(false)
  const [rollHistory, setRollHistory] = useState<string[]>([])

  const rollRarity = () => {
    setTotalRolls(prev => prev + 1)

    // Lucky Skip (1% chance)
    if (Math.random() < 0.01) {
      setLastSkip(true)
      setRollHistory(prev => [`🍀 Lucky Skip! Skipped this roll`, ...prev.slice(0, 4)])
      return
    }

    setLastSkip(false)

    // Weighted chance calculation
    const totalWeight = rarities.reduce((sum, r) => sum + r.chance * luckMultiplier, 0)
    let random = Math.random() * totalWeight
    let selectedRarity = rarities[0]

    for (const rarity of rarities) {
      random -= rarity.chance * luckMultiplier
      if (random <= 0) {
        selectedRarity = rarity
        break
      }
    }

    setCurrentRarity(selectedRarity)

    const lpGained = Math.floor(selectedRarity.lpReward * lpMultiplier)
    const ppGained = Math.floor(selectedRarity.ppReward * ppMultiplier)
    const tpGained = selectedRarity.tpReward

    setLuckPoints(prev => prev + lpGained)
    setPrestigePoints(prev => prev + ppGained)
    setTranscendentPoints(prev => prev + tpGained)

    setRollHistory(prev => [`Rolled ${selectedRarity.name}`, ...prev.slice(0, 4)])
  }

  return (
    <div className="min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4">
      <div className="bg-white p-6 rounded-xl shadow-lg w-full max-w-md">
        <h1 className="text-2xl font-bold mb-2 text-center">Luck Simulator</h1>
        <p className="text-center mb-4 text-gray-600">Roll to earn points and get rarities!</p>

        <div className="mb-4 space-y-1">
          <p>
            Current Rarity:{" "}
            <span className={currentRarity.color}>{currentRarity.name}</span>
          </p>
          <p>Luck Points: {luckPoints}</p>
          <p>Prestige Points: {prestigePoints}</p>
          <p>Transcendent Points: {transcendentPoints}</p>
        </div>

        <button
          className="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded w-full"
          onClick={rollRarity}
        >
          Roll!
        </button>

        <div className="mt-4">
          <h4 className="font-semibold mb-1">Roll History</h4>
          <ul className="list-disc list-inside space-y-1">
            {rollHistory.map((roll, i) => (
              <li key={i}>{roll}</li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  )
}
        </import>
